{"version":3,"sources":["webpack:///./src/views/front/CheckoutOrder.vue?1cd2","webpack:///src/views/front/CheckoutOrder.vue","webpack:///./src/views/front/CheckoutOrder.vue?fb9f","webpack:///./src/views/front/CheckoutOrder.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","order","staticClass","class","isOpen","staticStyle","attrs","on","$event","preventDefault","toggleCarts","_v","_m","_l","value","key","style","product","imageUrl","_s","title","_f","price","origin_price","_e","qty","total","cartTotal","Math","round","create_at","user","name","tel","address","message","is_paid","status","payLoading","goPay","staticRenderFns","data","watch","handler","getOrder","$route","params","id","deep","immediate","methods","vm","$store","commit","$http","get","api","then","response","success","$router","push","dispatch","post","setTimeout","computed","products","mounted","beforeEach","from","next","component"],"mappings":"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","file":"js/chunk-2d0ddfb5.4f68a686.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',[(_vm.order.total)?_c('div',{staticClass:\"row justify-content-center mt-sm-4 mt-3 u-fadeIn\"},[_c('div',{staticClass:\"col-lg-8 mb-3\"},[_c('section',{staticClass:\"card mb-3\"},[_c('a',{staticClass:\"card-header px-sm-3 px-2 d-flex align-items-center\",class:{ 'border-0': !_vm.isOpen },staticStyle:{\"cursor\":\"pointer\"},attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleCarts()}}},[_c('h3',{staticClass:\"card-title h5 mb-0\"},[_vm._v(\"購物車明細\")]),_c('i',{staticClass:\"fas fa-chevron-down p-rotate180 ml-auto\",class:{ 'active': _vm.isOpen }})]),_c('div',{staticClass:\"js-cart u-fz-sm\",staticStyle:{\"display\":\"none\"}},[_vm._m(0),_vm._l((_vm.order.products),function(value,key){return _c('div',{key:key,staticClass:\"p-checkout__grid py-2\"},[_c('div',{staticClass:\"p-checkout__grid__title\"},[_c('div',{staticClass:\"p-cart__img\",style:({ 'background-image': 'url(' + value.product.imageUrl +')' })}),_c('h5',{staticClass:\"h6\"},[_vm._v(_vm._s(value.product.title))])]),_c('div',{staticClass:\"p-checkout__grid__price\"},[_c('span',[_vm._v(\"NT\"+_vm._s(_vm._f(\"currency\")(value.product.price)))]),_c('br'),(value.product.price !== value.product.origin_price)?_c('del',{staticClass:\"u-fz-sm text-muted\"},[_vm._v(\" NT\"+_vm._s(_vm._f(\"currency\")(value.product.origin_price))+\" \")]):_vm._e()]),_c('div',{staticClass:\"p-checkout__grid__qty text-sm-center\"},[_c('span',{staticClass:\"d-sm-none\"},[_vm._v(\"數量：\")]),_vm._v(_vm._s(value.qty)+\" \")]),_c('div',{staticClass:\"p-checkout__grid__total\"},[_vm._v(\" NT\"+_vm._s(_vm._f(\"currency\")(value.total))+\" \")])])}),_c('div',{staticClass:\"p-checkout__grid py-1 border-0\"},[_c('div',{staticClass:\"p-checkout__grid__qty text-sm-center\"},[_vm._v(\" 小計 \")]),_c('div',{staticClass:\"p-checkout__grid__total\"},[_vm._v(\" NT\"+_vm._s(_vm._f(\"currency\")(_vm.cartTotal))+\" \")])]),_c('div',{staticClass:\"p-checkout__grid text-success py-1 border-0\",class:{ 'd-none': _vm.cartTotal === _vm.order.total }},[_c('div',{staticClass:\"p-checkout__grid__qty text-sm-center\"},[_vm._v(\" 折扣 \")]),_c('div',{staticClass:\"p-checkout__grid__total\"},[_vm._v(\" -NT\"+_vm._s(_vm._f(\"currency\")(_vm.cartTotal - Math.round(_vm.order.total)))+\" \")])]),_vm._m(1),_c('div',{staticClass:\"p-checkout__grid py-2 border-0\",class:{ 'text-success': _vm.cartTotal !== _vm.order.total }},[_c('b',{staticClass:\"p-checkout__grid__qty text-sm-center\"},[_vm._v(\" 總計 \")]),_c('b',{staticClass:\"p-checkout__grid__total\"},[_vm._v(\" NT\"+_vm._s(_vm._f(\"currency\")(Math.round(_vm.order.total)))+\" \")])])],2)]),_c('section',{staticClass:\"card\"},[_vm._m(2),_c('table',{staticClass:\"table table-borderless mb-0\"},[_c('tbody',[_c('tr',[_c('th',{staticClass:\" px-sm-3 px-2\",attrs:{\"scope\":\"row\",\"width\":\"150\"}},[_vm._v(\"成立時間\")]),_c('td',[_vm._v(_vm._s(_vm._f(\"timestamp\")(_vm.order.create_at)))])]),_c('tr',[_c('th',{staticClass:\" px-sm-3 px-2\",attrs:{\"scope\":\"row\"}},[_vm._v(\"收件人姓名\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.name))])]),_c('tr',[_c('th',{staticClass:\" px-sm-3 px-2\",attrs:{\"scope\":\"row\"}},[_vm._v(\"收件人手機號碼\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.tel))])]),_c('tr',[_c('th',{staticClass:\" px-sm-3 px-2\",attrs:{\"scope\":\"row\"}},[_vm._v(\"收件人地址\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.address))])]),(_vm.order.message)?_c('tr',[_c('th',{staticClass:\"px-sm-3 px-2\",attrs:{\"scope\":\"row\"}},[_vm._v(\"備註\")]),_c('td',[_vm._v(_vm._s(_vm.order.message))])]):_vm._e(),_c('tr',[_c('th',{staticClass:\" px-sm-3 px-2\",attrs:{\"scope\":\"row\"}},[_vm._v(\"付款狀態\")]),_c('td',[(_vm.order.is_paid)?_c('span',{staticClass:\"text-success\"},[_vm._v(\"已付款\")]):_vm._e(),(!_vm.order.is_paid)?_c('span',{staticClass:\"text-danger\"},[_vm._v(\"尚未付款\")]):_vm._e()])])])]),_c('div',{staticClass:\"d-flex px-sm-3 px-2 pt-2 pb-3\"},[_c('router-link',{staticClass:\"btn btn-outline-info btn-block text-dark\",attrs:{\"to\":\"/products\"}},[_vm._v(\" 繼續購物 \")]),(!_vm.order.is_paid)?_c('button',{staticClass:\"btn btn-info btn-block mt-0 ml-3\",class:{ 'disabled': _vm.status.payLoading },attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.goPay()}}},[_vm._v(\"確認付款去 \"),(_vm.status.payLoading)?_c('i',{staticClass:\"fas fa-spinner fa-spin ml-1\"}):_vm._e()]):_vm._e()],1)]),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"payModal\",\"tabindex\":\"-1\",\"aria-labelledby\":\"payModalLabel\",\"aria-hidden\":\"true\",\"data-backdrop\":\"static\",\"data-keyboard\":\"false\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-body text-center\"},[_c('div',{staticClass:\"success-animation\"},[_c('svg',{staticClass:\"checkmark\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 52 52\"}},[_c('circle',{staticClass:\"checkmark__circle\",attrs:{\"cx\":\"26\",\"cy\":\"26\",\"r\":\"25\",\"fill\":\"none\"}}),_c('path',{staticClass:\"checkmark__check\",attrs:{\"fill\":\"none\",\"d\":\"M14.1 27.2l7.1 7.2 16.7-16.8\"}})])]),_c('h5',{staticClass:\"h3 font-weight-bold\"},[_vm._v(\"付款成功！\")])])])])])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-checkout__grid py-2 d-none d-sm-grid u-fz-sm\"},[_c('div',{staticClass:\"p-checkout__grid__title\"},[_vm._v(\"商品資料\")]),_c('div',{staticClass:\"p-checkout__grid__price\"},[_vm._v(\"單件價格\")]),_c('div',{staticClass:\"p-checkout__grid__qty text-center\"},[_vm._v(\"數量\")]),_c('div',{staticClass:\"p-checkout__grid__total text-center\"},[_vm._v(\"小計\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"p-checkout__grid py-1\"},[_c('div',{staticClass:\"p-checkout__grid__qty text-sm-center\"},[_vm._v(\" 運費 \")]),_c('div',{staticClass:\"p-checkout__grid__total\"},[_vm._v(\" NT$0 \")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-header px-sm-3 px-2\"},[_c('h3',{staticClass:\"card-title h5 mb-0\"},[_vm._v(\"訂單資訊\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <main>\r\n    <div class=\"row justify-content-center mt-sm-4 mt-3 u-fadeIn\" v-if=\"order.total\">\r\n      <div class=\"col-lg-8 mb-3\">\r\n        <section class=\"card mb-3\">\r\n          <a href=\"#\" class=\"card-header px-sm-3 px-2 d-flex align-items-center\"\r\n            :class=\"{ 'border-0': !isOpen }\"\r\n            style=\"cursor: pointer\"\r\n            @click.prevent=\"toggleCarts()\">\r\n            <h3 class=\"card-title h5 mb-0\">購物車明細</h3>\r\n            <i class=\"fas fa-chevron-down p-rotate180 ml-auto\"\r\n              :class=\"{ 'active': isOpen }\"></i>\r\n          </a>\r\n          <div class=\"js-cart u-fz-sm\" style=\"display: none\">\r\n            <div class=\"p-checkout__grid py-2 d-none d-sm-grid u-fz-sm\">\r\n              <div class=\"p-checkout__grid__title\">商品資料</div>\r\n              <div class=\"p-checkout__grid__price\">單件價格</div>\r\n              <div class=\"p-checkout__grid__qty text-center\">數量</div>\r\n              <div class=\"p-checkout__grid__total text-center\">小計</div>\r\n            </div>\r\n            <div class=\"p-checkout__grid py-2\" v-for=\"(value, key) in order.products\" :key=\"key\">\r\n              <div class=\"p-checkout__grid__title\">\r\n                <div class=\"p-cart__img\"\r\n                  :style=\"{ 'background-image': 'url(' + value.product.imageUrl +')' }\"></div>\r\n                <h5 class=\"h6\">{{ value.product.title }}</h5>\r\n              </div>\r\n              <div class=\"p-checkout__grid__price\">\r\n                <span>NT{{ value.product.price | currency }}</span>\r\n                <br>\r\n                <del class=\"u-fz-sm text-muted\"\r\n                  v-if=\"value.product.price !== value.product.origin_price\">\r\n                  NT{{ value.product.origin_price | currency }}\r\n                </del>\r\n              </div>\r\n              <div class=\"p-checkout__grid__qty text-sm-center\">\r\n                <span class=\"d-sm-none\">數量：</span>{{ value.qty }}\r\n              </div>\r\n              <div class=\"p-checkout__grid__total\">\r\n                NT{{ value.total | currency }}\r\n              </div>\r\n            </div>\r\n            <div class=\"p-checkout__grid py-1 border-0\">\r\n              <div class=\"p-checkout__grid__qty text-sm-center\">\r\n                小計\r\n              </div>\r\n              <div class=\"p-checkout__grid__total\">\r\n                NT{{ cartTotal | currency }}\r\n              </div>\r\n            </div>\r\n            <div class=\"p-checkout__grid text-success py-1 border-0\"\r\n              :class=\"{ 'd-none': cartTotal === order.total }\">\r\n              <div class=\"p-checkout__grid__qty text-sm-center\">\r\n                折扣\r\n              </div>\r\n              <div class=\"p-checkout__grid__total\">\r\n                -NT{{ cartTotal - Math.round(order.total) | currency }}\r\n              </div>\r\n            </div>\r\n            <div class=\"p-checkout__grid py-1\">\r\n              <div class=\"p-checkout__grid__qty text-sm-center\">\r\n                運費\r\n              </div>\r\n              <div class=\"p-checkout__grid__total\">\r\n                NT$0\r\n              </div>\r\n            </div>\r\n            <div class=\"p-checkout__grid py-2 border-0\"\r\n              :class=\"{ 'text-success': cartTotal !== order.total }\">\r\n              <b class=\"p-checkout__grid__qty text-sm-center\">\r\n                總計\r\n              </b>\r\n              <b class=\"p-checkout__grid__total\">\r\n                NT{{ Math.round(order.total) | currency }}\r\n              </b>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <section class=\"card\">\r\n          <div class=\"card-header px-sm-3 px-2\">\r\n            <h3 class=\"card-title h5 mb-0\">訂單資訊</h3>\r\n          </div>\r\n          <table class=\"table table-borderless mb-0\">\r\n            <tbody>\r\n              <tr>\r\n                <th scope=\"row\" class=\" px-sm-3 px-2\" width=\"150\">成立時間</th>\r\n                <td>{{ order.create_at | timestamp }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th scope=\"row\" class=\" px-sm-3 px-2\">收件人姓名</th>\r\n                <td>{{ order.user.name }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th scope=\"row\" class=\" px-sm-3 px-2\">收件人手機號碼</th>\r\n                <td>{{ order.user.tel }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th scope=\"row\" class=\" px-sm-3 px-2\">收件人地址</th>\r\n                <td>{{ order.user.address }}</td>\r\n              </tr>\r\n              <tr v-if=\"order.message\">\r\n                <th scope=\"row\" class=\"px-sm-3 px-2\">備註</th>\r\n                <td>{{ order.message }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th scope=\"row\" class=\" px-sm-3 px-2\">付款狀態</th>\r\n                <td>\r\n                  <span class=\"text-success\" v-if=\"order.is_paid\">已付款</span>\r\n                  <span class=\"text-danger\" v-if=\"!order.is_paid\">尚未付款</span>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <div class=\"d-flex px-sm-3 px-2 pt-2 pb-3\">\r\n            <router-link class=\"btn btn-outline-info btn-block text-dark\" to=\"/products\">\r\n              繼續購物\r\n            </router-link>\r\n            <button class=\"btn btn-info btn-block mt-0 ml-3\" type=\"button\"\r\n              v-if=\"!order.is_paid\"\r\n              :class=\"{ 'disabled': status.payLoading }\"\r\n              @click=\"goPay()\">確認付款去\r\n              <i class=\"fas fa-spinner fa-spin ml-1\"\r\n                v-if=\"status.payLoading\"></i>\r\n            </button>\r\n          </div>\r\n        </section>\r\n        <div class=\"modal fade\" id=\"payModal\" tabindex=\"-1\"\r\n          aria-labelledby=\"payModalLabel\" aria-hidden=\"true\"\r\n          data-backdrop=\"static\" data-keyboard=\"false\">\r\n          <div class=\"modal-dialog modal-dialog-centered\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-body text-center\">\r\n                <div class=\"success-animation\">\r\n                  <svg class=\"checkmark\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 52 52\"><circle class=\"checkmark__circle\" cx=\"26\" cy=\"26\" r=\"25\" fill=\"none\" /><path class=\"checkmark__check\" fill=\"none\" d=\"M14.1 27.2l7.1 7.2 16.7-16.8\" /></svg>\r\n                </div>\r\n                <h5 class=\"h3 font-weight-bold\">付款成功！</h5>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\n\r\nexport default {\r\n  name: 'CheckoutOrder',\r\n  data() {\r\n    return {\r\n      isOpen: false,\r\n      status: {\r\n        payLoading: false,\r\n      },\r\n      order: {},\r\n    };\r\n  },\r\n  watch: {\r\n    '$route.params': {\r\n      handler() {\r\n        this.getOrder(this.$route.params.id);\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n  },\r\n  methods: {\r\n    getOrder(id) {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_API_PATH}api/${process.env.VUE_APP_CUSTOM_PATH}/order/${id}`;\r\n\r\n      vm.$store.commit('ISLOADING', true);\r\n      vm.$http.get(api).then((response) => {\r\n        vm.$store.commit('ISLOADING', false);\r\n        if (response.data.success && response.data.order) {\r\n          vm.order = response.data.order;\r\n        } else {\r\n          vm.$router.push('/products');\r\n          vm.$store.dispatch('alertModules/updateMessage', { message: '找不到訂單' });\r\n        }\r\n      });\r\n    },\r\n    toggleCarts() {\r\n      $('.js-cart').slideToggle();\r\n      this.isOpen = !this.isOpen;\r\n    },\r\n    goPay() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_API_PATH}api/${process.env.VUE_APP_CUSTOM_PATH}/pay/${vm.order.id}`;\r\n\r\n      vm.status.payLoading = true;\r\n      vm.$http.post(api).then((response) => {\r\n        vm.status.payLoading = false;\r\n        if (response.data.success) {\r\n          $('#payModal').modal('show');\r\n          setTimeout(() => {\r\n            $('#payModal').modal('hide');\r\n            vm.$router.push('/products');\r\n          }, 5000);\r\n        } else {\r\n          vm.$store.dispatch('alertModules/updateMessage', response.data);\r\n        }\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    cartTotal() {\r\n      let total = 0;\r\n      // eslint-disable-next-line no-restricted-syntax\r\n      for (const key in this.order.products) {\r\n        if (key) {\r\n          total += this.order.products[key].total;\r\n        }\r\n      }\r\n      return total;\r\n    },\r\n  },\r\n  mounted() {\r\n    const vm = this;\r\n    $('.p-checkout__item').eq(0).addClass('active');\r\n    $('.p-checkout__item').eq(1).addClass('active');\r\n    vm.$router.beforeEach((to, from, next) => {\r\n      if (from.name === vm.$route.name) {\r\n        $('.p-checkout__item').eq(0).removeClass('active');\r\n        $('.p-checkout__item').eq(1).removeClass('active');\r\n        next();\r\n      } else {\r\n        next();\r\n      }\r\n    });\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CheckoutOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CheckoutOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CheckoutOrder.vue?vue&type=template&id=7741102d&\"\nimport script from \"./CheckoutOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./CheckoutOrder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}