{"version":3,"sources":["webpack:///./src/views/front/CheckoutCart.vue?a593","webpack:///src/views/front/CheckoutCart.vue","webpack:///./src/views/front/CheckoutCart.vue?0a3f","webpack:///./src/views/front/CheckoutCart.vue","webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/core-js/internals/array-reduce.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","carts","length","_e","staticClass","_v","attrs","scopedSlots","_u","key","fn","ref","handleSubmit","on","$event","preventDefault","goCheckout","_s","_l","item","id","class","style","imageUrl","title","_f","price","origin_price","qty","showDelModal","getTotal","final_total","total","status","goCheckoutLoading","_m","newCart","removeCart","staticRenderFns","name","data","methods","$store","dispatch","vm","$http","get","api","computed","reduce","plus","components","QtyButton","component","$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","STRICT_METHOD","CHROME_BUG","target","proto","forced","callbackfn","arguments","undefined","aFunction","toObject","IndexedObject","toLength","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","index","i","TypeError","module","exports","right"],"mappings":"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","file":"js/chunk-3a1ecb38.4a1fac83.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',[(!_vm.carts.length)?_c('section',{staticClass:\"row justify-content-center mt-5\"},[_c('div',{staticClass:\"col text-center\"},[_c('i',{staticClass:\"fas fa-5x fa-shopping-cart text-secondary mb-4\"}),_c('div',{staticClass:\"h5 font-weight-bold\"},[_vm._v(\"你的購物車是空的\")]),_c('div',{staticClass:\"u-fz-sm mb-3\"},[_vm._v(\"記得加入商品到你的購物車\")]),_c('router-link',{staticClass:\"btn btn-info px-4\",attrs:{\"to\":\"/products\"}},[_vm._v(\"繼續購物\")])],1)]):_vm._e(),_c('validation-observer',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [(_vm.carts.length)?_c('form',{staticClass:\"row mt-sm-4 mt-3\",on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.goCheckout)}}},[_c('section',{staticClass:\"col-lg-8 mb-3\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header px-sm-3 px-2\"},[_c('h3',{staticClass:\"font-weight-bold card-title h5 mb-0\"},[_vm._v(\"購物車（\"+_vm._s(_vm.carts.length)+\" 件）\")])]),_c('div',{staticClass:\"p-checkout__grid d-none d-sm-grid u-fz-sm\"},[_c('div',{staticClass:\"p-checkout__grid__title\"},[_vm._v(\"商品資料\")]),_c('div',{staticClass:\"p-checkout__grid__price\"},[_vm._v(\"單件價格\")]),_c('div',{staticClass:\"p-checkout__grid__qty text-center\"},[_vm._v(\"數量\")]),_c('div',{staticClass:\"p-checkout__grid__total text-center\"},[_vm._v(\"小計\")]),_c('div',{staticClass:\"p-checkout__grid__btn\"})]),_vm._l((_vm.carts),function(item,key){return _c('div',{key:item.id,staticClass:\"p-checkout__grid\",class:{ 'border-bottom-0': key + 1 === _vm.carts.length }},[_c('div',{staticClass:\"p-checkout__grid__title\"},[_c('div',{staticClass:\"p-cart__img\",style:({ 'background-image': 'url(' + item.imageUrl +')' })}),_c('h5',{staticClass:\"h6\"},[_vm._v(_vm._s(item.title))])]),_c('div',{staticClass:\"p-checkout__grid__price\"},[_c('span',[_vm._v(\"NT\"+_vm._s(_vm._f(\"currency\")(item.price)))]),_c('br'),(item.price !== item.origin_price)?_c('del',{staticClass:\"u-fz-sm text-muted\"},[_vm._v(\" NT\"+_vm._s(_vm._f(\"currency\")(item.origin_price))+\" \")]):_vm._e()]),_c('div',{staticClass:\"p-checkout__grid__qty\"},[_c('qty-button',{attrs:{\"data\":item,\"qtyClass\":['input-group-sm', 'pr-sm-1'],\"isId\":false}})],1),_c('div',{staticClass:\"p-checkout__grid__total\"},[_vm._v(\" NT\"+_vm._s(_vm._f(\"currency\")(item.qty * item.price))+\" \")]),_c('div',{staticClass:\"p-checkout__grid__btn\"},[_c('button',{staticClass:\"close float-none\",attrs:{\"type\":\"button\",\"aria-label\":\"Close\"},on:{\"click\":function($event){return _vm.showDelModal(item)}}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])])})],2)]),_c('section',{staticClass:\"col-lg-4\"},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header px-sm-3 px-2\"},[_c('h3',{staticClass:\"font-weight-bold card-title h5 mb-0\"},[_vm._v(\"訂單資訊\")])]),_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"d-flex justify-content-between mb-2\"},[_c('span',[_vm._v(\"小計：\")]),_c('span',[_vm._v(\"NT\"+_vm._s(_vm._f(\"currency\")(_vm.getTotal)))])]),_c('div',{staticClass:\"d-flex justify-content-between mb-2\"},[_c('span',[_vm._v(\"運費：\")]),_c('span',[_vm._v(\"NT$0\")])]),_c('hr'),_c('b',{staticClass:\"d-flex justify-content-between mb-3\",class:{ 'text-success': _vm.carts.final_total !== _vm.carts.total }},[_c('span',[_vm._v(\"合計：\")]),_c('span',[_vm._v(\"NT\"+_vm._s(_vm._f(\"currency\")(_vm.getTotal)))])]),_c('div',{staticClass:\"d-flex\"},[_c('router-link',{staticClass:\"btn btn-outline-info btn-block mr-2 text-dark\",attrs:{\"to\":\"/products\"}},[_vm._v(\"繼續購物\")]),_c('button',{staticClass:\"btn btn-info btn-block mt-0\",class:{ 'disabled': _vm.status.goCheckoutLoading },attrs:{\"type\":\"submit\"}},[_vm._v(\" 前往結帳 \"),(_vm.status.goCheckoutLoading)?_c('i',{staticClass:\"fas fa-spinner fa-spin ml-1\"}):_vm._e()])],1)])])])]):_vm._e()]}}])}),_c('div',{staticClass:\"modal fade\",attrs:{\"id\":\"delModal\",\"tabindex\":\"-1\",\"aria-labelledby\":\"delModalLabel\",\"aria-hidden\":\"true\"}},[_c('div',{staticClass:\"modal-dialog modal-dialog-centered\"},[_c('div',{staticClass:\"modal-content\"},[_vm._m(0),_c('div',{staticClass:\"modal-body text-center\"},[_vm._v(\" 確定要移除 \"),_c('b',[_vm._v(_vm._s(_vm.newCart.title))]),_vm._v(\" 這個商品嗎？ \")]),_c('div',{staticClass:\"modal-footer border-0 pt-4\"},[_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\"}},[_vm._v(\"取消\")]),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeCart()}}},[_vm._v(\"確定\")])])])])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-header border-0 pt-2 pb-4\"},[_c('button',{staticClass:\"close\",attrs:{\"type\":\"button\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\"}},[_c('span',{attrs:{\"aria-hidden\":\"true\"}},[_vm._v(\"×\")])])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <main>\r\n    <section class=\"row justify-content-center mt-5\" v-if=\"!carts.length\">\r\n      <div class=\"col text-center\">\r\n        <i class=\"fas fa-5x fa-shopping-cart text-secondary mb-4\"></i>\r\n        <div class=\"h5 font-weight-bold\">你的購物車是空的</div>\r\n        <div class=\"u-fz-sm mb-3\">記得加入商品到你的購物車</div>\r\n        <router-link to=\"/products\" class=\"btn btn-info px-4\">繼續購物</router-link>\r\n      </div>\r\n    </section>\r\n    <validation-observer v-slot=\"{ handleSubmit }\">\r\n      <form class=\"row mt-sm-4 mt-3\" v-if=\"carts.length\"\r\n        @submit.prevent=\"handleSubmit(goCheckout)\">\r\n        <section class=\"col-lg-8 mb-3\">\r\n          <div class=\"card\">\r\n            <div class=\"card-header px-sm-3 px-2\">\r\n              <h3 class=\"font-weight-bold card-title h5 mb-0\">購物車（{{ carts.length }} 件）</h3>\r\n            </div>\r\n            <div class=\"p-checkout__grid d-none d-sm-grid u-fz-sm\">\r\n              <div class=\"p-checkout__grid__title\">商品資料</div>\r\n              <div class=\"p-checkout__grid__price\">單件價格</div>\r\n              <div class=\"p-checkout__grid__qty text-center\">數量</div>\r\n              <div class=\"p-checkout__grid__total text-center\">小計</div>\r\n              <div class=\"p-checkout__grid__btn\"></div>\r\n            </div>\r\n            <div class=\"p-checkout__grid\"\r\n              :class=\"{ 'border-bottom-0': key + 1 === carts.length }\"\r\n              v-for=\"(item, key) in carts\" :key=\"item.id\">\r\n              <div class=\"p-checkout__grid__title\">\r\n                <div class=\"p-cart__img\"\r\n                  :style=\"{ 'background-image': 'url(' + item.imageUrl +')' }\"></div>\r\n                <h5 class=\"h6\">{{ item.title }}</h5>\r\n              </div>\r\n              <div class=\"p-checkout__grid__price\">\r\n                <span>NT{{ item.price | currency }}</span>\r\n                <br>\r\n                <del class=\"u-fz-sm text-muted\"\r\n                  v-if=\"item.price !== item.origin_price\">\r\n                  NT{{ item.origin_price | currency }}\r\n                </del>\r\n              </div>\r\n              <div class=\"p-checkout__grid__qty\">\r\n                <qty-button :data=\"item\"\r\n                  :qtyClass=\"['input-group-sm', 'pr-sm-1']\" :isId=\"false\"></qty-button>\r\n              </div>\r\n              <div class=\"p-checkout__grid__total\">\r\n                NT{{ item.qty * item.price | currency }}\r\n              </div>\r\n              <div class=\"p-checkout__grid__btn\">\r\n                <button type=\"button\" class=\"close float-none\" aria-label=\"Close\"\r\n                  @click=\"showDelModal(item)\">\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n        <section class=\"col-lg-4\">\r\n          <div class=\"card\">\r\n            <div class=\"card-header px-sm-3 px-2\">\r\n              <h3 class=\"font-weight-bold card-title h5 mb-0\">訂單資訊</h3>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <div class=\"d-flex justify-content-between mb-2\">\r\n                <span>小計：</span>\r\n                <span>NT{{ getTotal | currency }}</span>\r\n              </div>\r\n              <div class=\"d-flex justify-content-between mb-2\">\r\n                <span>運費：</span>\r\n                <span>NT$0</span>\r\n              </div>\r\n              <hr>\r\n              <b class=\"d-flex justify-content-between mb-3\"\r\n                :class=\"{ 'text-success': carts.final_total !== carts.total }\">\r\n                <span>合計：</span>\r\n                <span>NT{{ getTotal | currency }}</span>\r\n              </b>\r\n              <div class=\"d-flex\">\r\n                <router-link to=\"/products\"\r\n                  class=\"btn btn-outline-info btn-block mr-2 text-dark\">繼續購物</router-link>\r\n                <button type=\"submit\" class=\"btn btn-info btn-block mt-0\"\r\n                  :class=\"{ 'disabled': status.goCheckoutLoading }\">\r\n                  前往結帳\r\n                  <i class=\"fas fa-spinner fa-spin ml-1\"\r\n                    v-if=\"status.goCheckoutLoading\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </form>\r\n    </validation-observer>\r\n    <div class=\"modal fade\" id=\"delModal\" tabindex=\"-1\"\r\n      aria-labelledby=\"delModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog modal-dialog-centered\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header border-0 pt-2 pb-4\">\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body text-center\">\r\n            確定要移除 <b>{{ newCart.title }}</b> 這個商品嗎？\r\n          </div>\r\n          <div class=\"modal-footer border-0 pt-4\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\r\n            <button type=\"button\" class=\"btn btn-danger\" @click=\"removeCart()\">確定</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n<script>\r\nimport $ from 'jquery';\r\nimport { mapGetters } from 'vuex';\r\n\r\nimport QtyButton from '@/components/QtyButton.vue';\r\n\r\nexport default {\r\n  name: 'CheckoutCart',\r\n  data() {\r\n    return {\r\n      status: {\r\n        goCheckoutLoading: false,\r\n      },\r\n      total: 0,\r\n      newCart: {},\r\n    };\r\n  },\r\n  methods: {\r\n    showDelModal(item) {\r\n      this.newCart = item;\r\n      $('#delModal').modal('show');\r\n    },\r\n    removeCart() {\r\n      $('#delModal').modal('hide');\r\n      this.$store.dispatch('cartModules/removeCart', this.newCart.id);\r\n      // this.$bus.$emit('removeCart', this.newCart.id);\r\n    },\r\n    goCheckout() {\r\n      const vm = this;\r\n      const api = `${process.env.VUE_APP_API_PATH}api/${process.env.VUE_APP_CUSTOM_PATH}/cart`;\r\n      const data = [];\r\n      const reqListDel = [];\r\n      const reqListPost = [];\r\n      const carts = JSON.parse(localStorage.getItem('carts'));\r\n\r\n      vm.status.goCheckoutLoading = true;\r\n      vm.$http.get(api)\r\n        .then((response) => response.data.data.carts)\r\n        // eslint-disable-next-line consistent-return\r\n        .then((cartsData) => {\r\n          if (cartsData.length) {\r\n            cartsData.forEach((el) => {\r\n              const req = vm.$http.delete(`${api}/${el.id}`);\r\n              reqListDel.push(req);\r\n            });\r\n            return vm.$http.all(reqListDel);\r\n          }\r\n        })\r\n        .then(() => {\r\n          carts.forEach((el) => {\r\n            data.push({\r\n              product_id: el.id,\r\n              qty: el.qty,\r\n            });\r\n          });\r\n          data.forEach((el) => {\r\n            const req = vm.$http.post(api, { data: el });\r\n            reqListPost.push(req);\r\n          });\r\n          return vm.$http.all(reqListPost);\r\n        })\r\n        .then(() => {\r\n          vm.status.goCheckoutLoading = false;\r\n          vm.$router.push('/checkout/info');\r\n        });\r\n    },\r\n  },\r\n  computed: {\r\n    getTotal() {\r\n      return this.carts.reduce((acc, cur) => {\r\n        const plus = acc + (cur.qty * cur.price);\r\n        return plus;\r\n      }, 0);\r\n    },\r\n    ...mapGetters('cartModules', ['carts']),\r\n  },\r\n  components: {\r\n    QtyButton,\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CheckoutCart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CheckoutCart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CheckoutCart.vue?vue&type=template&id=3893c9f6&\"\nimport script from \"./CheckoutCart.vue?vue&type=script&lang=js&\"\nexport * from \"./CheckoutCart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n"],"sourceRoot":""}