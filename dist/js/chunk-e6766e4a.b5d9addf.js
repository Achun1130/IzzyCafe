(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e6766e4a"],{5220:function(t){t.exports=JSON.parse('{"臺北市":["中正區","大同區","中山區","萬華區","信義區","松山區","大安區","南港區","北投區","內湖區","士林區","文山區"],"新北市":["板橋區","新莊區","泰山區","林口區","淡水區","金山區","八里區","萬里區","石門區","三芝區","瑞芳區","汐止區","平溪區","貢寮區","雙溪區","深坑區","石碇區","新店區","坪林區","烏來區","中和區","永和區","土城區","三峽區","樹林區","鶯歌區","三重區","蘆洲區","五股區"],"基隆市":["仁愛區","中正區","信義區","中山區","安樂區","暖暖區","七堵區"],"桃園市":["桃園區","中壢區","平鎮區","八德區","楊梅區","蘆竹區","龜山區","龍潭區","大溪區","大園區","觀音區","新屋區","復興區"],"新竹縣":["竹北市","竹東鎮","新埔鎮","關西鎮","峨眉鄉","寶山鄉","北埔鄉","橫山鄉","芎林鄉","湖口鄉","新豐鄉","尖石鄉","五峰鄉"],"新竹市":["東區","北區","香山區"],"苗栗縣":["苗栗市","通霄鎮","苑裡鎮","竹南鎮","頭份鎮","後龍鎮","卓蘭鎮","西湖鄉","頭屋鄉","公館鄉","銅鑼鄉","三義鄉","造橋鄉","三灣鄉","南庄鄉","大湖鄉","獅潭鄉","泰安鄉"],"臺中市":["中區","東區","南區","西區","北區","北屯區","西屯區","南屯區","太平區","大里區","霧峰區","烏日區","豐原區","后里區","東勢區","石岡區","新社區","和平區","神岡區","潭子區","大雅區","大肚區","龍井區","沙鹿區","梧棲區","清水區","大甲區","外埔區","大安區"],"南投縣":["南投市","埔里鎮","草屯鎮","竹山鎮","集集鎮","名間鄉","鹿谷鄉","中寮鄉","魚池鄉","國姓鄉","水里鄉","信義鄉","仁愛鄉"],"彰化縣":["彰化市","員林鎮","和美鎮","鹿港鎮","溪湖鎮","二林鎮","田中鎮","北斗鎮","花壇鄉","芬園鄉","大村鄉","永靖鄉","伸港鄉","線西鄉","福興鄉","秀水鄉","埔心鄉","埔鹽鄉","大城鄉","芳苑鄉","竹塘鄉","社頭鄉","二水鄉","田尾鄉","埤頭鄉","溪州鄉"],"雲林縣":["斗六市","斗南鎮","虎尾鎮","西螺鎮","土庫鎮","北港鎮","莿桐鄉","林內鄉","古坑鄉","大埤鄉","崙背鄉","二崙鄉","麥寮鄉","臺西鄉","東勢鄉","褒忠鄉","四湖鄉","口湖鄉","水林鄉","元長鄉"],"嘉義縣":["太保市","朴子市","布袋鎮","大林鎮","民雄鄉","溪口鄉","新港鄉","六腳鄉","東石鄉","義竹鄉","鹿草鄉","水上鄉","中埔鄉","竹崎鄉","梅山鄉","番路鄉","大埔鄉","阿里山鄉"],"嘉義市":["東區","西區"],"臺南市":["中西區","東區","南區","北區","安平區","安南區","永康區","歸仁區","新化區","左鎮區","玉井區","楠西區","南化區","仁德區","關廟區","龍崎區","官田區","麻豆區","佳里區","西港區","七股區","將軍區","學甲區","北門區","新營區","後壁區","白河區","東山區","六甲區","下營區","柳營區","鹽水區","善化區","大內區","山上區","新市區","安定區"],"高雄市":["楠梓區","左營區","鼓山區","三民區","鹽埕區","前金區","新興區","苓雅區","前鎮區","小港區","旗津區","鳳山區","大寮區","鳥松區","林園區","仁武區","大樹區","大社區","岡山區","路竹區","橋頭區","梓官區","彌陀區","永安區","燕巢區","田寮區","阿蓮區","茄萣區","湖內區","旗山區","美濃區","內門區","杉林區","甲仙區","六龜區","茂林區","桃源區","那瑪夏區"],"屏東縣":["屏東市","潮州鎮","東港鎮","恆春鎮","萬丹鄉","長治鄉","麟洛鄉","九如鄉","里港鄉","鹽埔鄉","高樹鄉","萬巒鄉","內埔鄉","竹田鄉","新埤鄉","枋寮鄉","新園鄉","崁頂鄉","林邊鄉","南州鄉","佳冬鄉","琉球鄉","車城鄉","滿州鄉","枋山鄉","霧台鄉","瑪家鄉","泰武鄉","來義鄉","春日鄉","獅子鄉","牡丹鄉","三地門鄉"],"宜蘭縣":["宜蘭市","羅東鎮","蘇澳鎮","頭城鎮","礁溪鄉","壯圍鄉","員山鄉","冬山鄉","五結鄉","三星鄉","大同鄉","南澳鄉"],"花蓮縣":["花蓮市","鳳林鎮","玉里鎮","新城鄉","吉安鄉","壽豐鄉","秀林鄉","光復鄉","豐濱鄉","瑞穗鄉","萬榮鄉","富里鄉","卓溪鄉"],"臺東縣":["臺東市","成功鎮","關山鎮","長濱鄉","海端鄉","池上鄉","東河鄉","鹿野鄉","延平鄉","卑南鄉","金峰鄉","大武鄉","達仁鄉","綠島鄉","蘭嶼鄉","太麻里鄉"],"澎湖縣":["馬公市","湖西鄉","白沙鄉","西嶼鄉","望安鄉","七美鄉"],"金門縣":["金城鎮","金湖鎮","金沙鎮","金寧鄉","烈嶼鄉","烏坵鄉"],"連江縣":["南竿鄉","北竿鄉","莒光鄉","東引鄉"]}')},5817:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("main",[t.cartsData.total?a("ValidationObserver",{attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.handleSubmit;return[a("form",{staticClass:"row mt-3 u-fadeIn",on:{submit:function(s){return s.preventDefault(),e(t.goOrder)}}},[a("div",{staticClass:"col-lg-8 col-md-7 mb-3"},[a("section",{staticClass:"card mb-3"},[a("div",{staticClass:"card-header px-sm-3 px-2 d-flex"},[a("h3",{staticClass:"card-title h5 mb-0 font-weight-bold"},[t._v("顧客資料")])]),a("div",{staticClass:"card-body px-sm-3 px-2"},[a("ValidationProvider",{staticClass:"form-group",attrs:{name:"名稱",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("label",{attrs:{for:"name"}},[t._v("顧客名稱*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.info.name,expression:"info.name"}],staticClass:"form-control",class:o,attrs:{type:"text",id:"name"},domProps:{value:t.info.name},on:{input:function(s){s.target.composing||t.$set(t.info,"name",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{name:"電子信箱",rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("label",{attrs:{for:"email"}},[t._v("電子信箱*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",class:o,attrs:{type:"email",id:"email"},domProps:{value:t.user.email},on:{input:function(s){s.target.composing||t.$set(t.user,"email",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{name:"手機號碼",rules:"required|numeric",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("label",{attrs:{for:"tel"}},[t._v("手機號碼*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.info.tel,expression:"info.tel"}],staticClass:"form-control",class:o,attrs:{type:"tel",id:"tel",minlength:"10",maxlength:"10"},domProps:{value:t.info.tel},on:{input:function(s){s.target.composing||t.$set(t.info,"tel",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)}),a("label",{attrs:{for:"message"}},[t._v("訂單備註")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{rows:"2",placeholder:"有什麼想告訴賣家的嗎？"},domProps:{value:t.message},on:{input:function(s){s.target.composing||(t.message=s.target.value)}}})],1)]),a("section",{staticClass:"card"},[a("div",{staticClass:"card-header px-sm-3 px-2 d-flex align-items-center justify-content-between"},[a("h3",{staticClass:"card-title h5 mb-0 font-weight-bold"},[t._v("送貨資料")]),a("span",{staticClass:"u-fz-sm"},[t._v("運費：NT$0")])]),a("div",{staticClass:"card-body px-sm-3 px-2"},[a("div",{staticClass:"custom-control custom-checkbox mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.same,expression:"same"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:"same"},domProps:{checked:Array.isArray(t.same)?t._i(t.same,null)>-1:t.same},on:{change:function(s){var a=t.same,e=s.target,o=!!e.checked;if(Array.isArray(a)){var r=null,n=t._i(a,r);e.checked?n<0&&(t.same=a.concat([r])):n>-1&&(t.same=a.slice(0,n).concat(a.slice(n+1)))}else t.same=o}}}),a("label",{staticClass:"custom-control-label",attrs:{for:"same"}},[t._v("收件人資料與顧客資料相同")])]),a("ValidationProvider",{staticClass:"form-group",attrs:{name:"收件人姓名",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("label",{attrs:{for:"addressee"}},[t._v("收件人姓名*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",class:o,attrs:{type:"text",id:"addressee"},domProps:{value:t.user.name},on:{input:function(s){s.target.composing||t.$set(t.user,"name",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))]),a("span",{staticClass:"u-fz-sm text-muted"},[t._v("請填入收件人真實姓名，以確保順利收件")])]}}],null,!0)}),a("ValidationProvider",{staticClass:"form-group",attrs:{name:"收件人手機號碼",rules:"required|numeric",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("label",{attrs:{for:"addressee-tel"}},[t._v("收件人手機號碼*")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.tel,expression:"user.tel"}],staticClass:"form-control",class:o,attrs:{type:"tel",id:"addressee-tel",minlength:"10",maxlength:"10"},domProps:{value:t.user.tel},on:{input:function(s){s.target.composing||t.$set(t.user,"tel",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)}),a("label",{attrs:{for:"county"}},[t._v("收件人地址*")]),a("div",{staticClass:"form-row mb-2"},[a("ValidationProvider",{staticClass:"col",attrs:{name:"縣市",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.info.county,expression:"info.county"}],staticClass:"custom-select",class:o,attrs:{id:"county"},on:{change:[function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.info,"county",s.target.multiple?a:a[0])},function(s){t.info.dist=""}]}},[a("option",{attrs:{value:"",disabled:""}},[t._v("請選擇縣市")]),t._l(t.countyData,(function(s,e,o){return a("option",{key:o,domProps:{value:e}},[t._v(t._s(e))])}))],2),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"col",attrs:{name:"鄉鎮市區",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.info.dist,expression:"info.dist"}],staticClass:"custom-select",class:o,on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.info,"dist",s.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("請選擇鄉鎮市區")]),t._l(t.countyData[t.info.county],(function(s){return a("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])}))],2),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)})],1),a("ValidationProvider",{staticClass:"form-group mb-0",attrs:{name:"地址",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.errors,o=s.classes;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.info.road,expression:"info.road"}],staticClass:"form-control",class:o,attrs:{type:"text"},domProps:{value:t.info.road},on:{input:function(s){s.target.composing||t.$set(t.info,"road",s.target.value)}}}),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(e[0]))])]}}],null,!0)})],1)])]),a("div",{staticClass:"col-lg-4 col-md-5"},[a("section",{staticClass:"card mb-3"},[a("a",{staticClass:"card-header px-sm-3 px-2 d-flex align-items-center",class:{"border-0":!t.isOpen},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.toggleCarts()}}},[a("h3",{staticClass:"card-title h5 mb-0 font-weight-bold"},[t._v(" 購物車（"+t._s(t.cartsData.carts.length)+"件） ")]),a("i",{staticClass:"fas fa-chevron-down p-rotate180 ml-auto",class:{active:t.isOpen}})]),a("div",{staticClass:"js-cart",staticStyle:{display:"none"}},t._l(t.cartsData.carts,(function(s,e){return a("div",{key:s.id,staticClass:"px-sm-3 px-2 py-2 border-bottom u-border-sm border-secondary",class:{"border-0":e+1===t.cartsData.carts.length}},[a("div",{staticClass:"d-flex mb-2"},[a("div",{staticClass:"p-cart__img",style:{"background-image":"url("+s.product.imageUrl+")"}}),a("div",{staticClass:"d-flex flex-column flex-grow-1"},[a("h5",{staticClass:"h6"},[t._v(t._s(s.product.title))]),a("div",{staticClass:"d-flex flex-column mt-auto text-right"},[a("span",{staticClass:"mt-auto"},[t._v("NT"+t._s(t._f("currency")(s.product.price)))]),s.product.price!==s.product.origin_price?a("del",{staticClass:"u-fz-sm text-muted"},[t._v(" NT"+t._s(t._f("currency")(s.product.origin_price))+" ")]):t._e()])])]),a("div",{staticClass:"d-flex justify-content-between"},[a("span",[t._v("數量："+t._s(s.qty))]),a("span",[t._v("NT"+t._s(t._f("currency")(s.total)))])])])})),0)]),a("section",{staticClass:"card"},[a("div",{staticClass:"card-header px-sm-3 px-2 d-flex align-items-center"},[a("h3",{staticClass:"card-title h5 mb-0 font-weight-bold"},[t._v(" 訂單資訊 ")]),t.status.couponLoading?a("i",{staticClass:"fas fa-spinner fa-spin ml-2"}):t._e()]),a("div",{staticClass:"px-sm-3 px-2 py-2 border-bottom u-border-sm border-secondary"},[a("div",{staticClass:"d-flex justify-content-between mb-2"},[a("span",[t._v("小計：")]),a("span",[t._v("NT"+t._s(t._f("currency")(t.cartsData.total)))])]),a("div",{staticClass:"d-none justify-content-between mb-2 text-success",class:{"d-flex":t.cartsData.final_total!==t.cartsData.total}},[a("span",[t._v("折扣：")]),a("span",[t._v(" - NT"+t._s(t._f("currency")(t.cartsData.total-Math.round(t.cartsData.final_total)))+" ")])]),a("div",{staticClass:"d-flex justify-content-between mb-2"},[a("span",[t._v("運費：")]),a("span",[t._v("NT$0")])]),a("label",{staticClass:"js-coupon-message",attrs:{for:"coupon"}},[t._v("優惠碼")]),a("div",{staticClass:"d-flex mb-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon.code,expression:"coupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"coupon"},domProps:{value:t.coupon.code},on:{input:function(s){s.target.composing||t.$set(t.coupon,"code",s.target.value)}}}),a("button",{staticClass:"btn btn-sm btn-secondary flex-shrink-0 ml-2 px-4",class:{disabled:t.status.couponLoading},attrs:{type:"button"},on:{click:function(s){return t.addCode()}}},[t._v("套用 ")])]),a("div",{staticClass:"u-fz-sm py-2 text-dark"},[t._v(" 輸入 "),a("a",{staticClass:"bg-secondary p-1",attrs:{href:"#",title:"點擊複製"},on:{click:function(s){return s.preventDefault(),t.copyText(s)}}},[t._v("izzy2021")]),t._v(" 即可享有 88 折優惠 ")]),a("span",{staticClass:"u-fz-sm js-coupon-message"},[t._v(t._s(t.coupon.message))]),a("b",{staticClass:"d-flex justify-content-between mt-2 mb-3",class:{"text-success":t.cartsData.final_total!==t.cartsData.total}},[a("span",[t._v("合計：")]),a("span",[t._v("NT"+t._s(t._f("currency")(Math.round(t.cartsData.final_total))))])]),a("div",{staticClass:"d-flex"},[a("router-link",{staticClass:"btn btn-outline-info btn-block mr-2 text-dark",attrs:{to:"/checkout"}},[t._v("返回購物車")]),a("button",{staticClass:"btn btn-info btn-block mt-0",class:{disabled:t.status.orderLoading},attrs:{type:"submit"}},[t._v(" 提交訂單 "),t.status.orderLoading?a("i",{staticClass:"fas fa-spinner fa-spin ml-1"}):t._e()])],1)])])])])]}}],null,!1,3152592889)}):t._e()],1)},o=[],r=(a("99af"),a("159b"),a("b0c0"),a("1157")),n=a.n(r),i=a("5220"),c={name:"CheckoutInfo",data:function(){return{isOpen:!1,same:!1,coupon:{message:"",code:""},status:{couponLoading:!1,orderLoading:!1},cartsData:{},countyData:i,user:{name:"",tel:"",address:""},message:"",info:{county:"",dist:"",road:""}}},methods:{getCarts:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("chin","/cart");t.$store.commit("ISLOADING",!0),t.$http.get(s).then((function(s){t.$store.commit("ISLOADING",!1),t.cartsData=s.data.data}))},addCode:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("chin","/coupon");t.status.couponLoading=!0,t.$http.post(s,{data:{code:t.coupon.code}}).then((function(s){t.status.couponLoading=!1,t.coupon.message=s.data.message,t.getCarts(),s.data.success?(n()(".js-coupon-message").removeClass("text-danger").addClass("text-success"),n()("#coupon").removeClass("is-invalid").addClass("is-valid")):(n()(".js-coupon-message").removeClass("text-success").addClass("text-danger"),n()("#coupon").removeClass("is-valid").addClass("is-invalid"))}))},clearCarts:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("chin","/cart/"),a=[];t.cartsData.carts.forEach((function(e){var o=t.$http.delete(s+e.id);a.push(o)})),t.$http.all(a)},toggleCarts:function(){n()(".js-cart").slideToggle(),this.isOpen=!this.isOpen},goOrder:function(){var t=this,s="".concat("https://vue-course-api.hexschool.io/","api/").concat("chin","/order"),a={data:{user:t.user,message:t.message}};t.status.orderLoading=!0,t.$http.post(s,a).then((function(s){t.status.orderLoading=!1,s.data.success?(localStorage.removeItem("carts"),t.$store.commit("cartModules/GETCARTS"),t.$router.push("/checkout/order/".concat(s.data.orderId))):(t.$router.push("/checkout"),t.$store.dispatch("alertModules/updateMessage",s.data))}))},copyText:function(t){this.$store.dispatch("copyText",t)}},watch:{same:function(){this.same&&(this.user.name=this.info.name,this.user.tel=this.info.tel)},info:{handler:function(){this.same&&(this.user.name=this.info.name,this.user.tel=this.info.tel),this.user.address=this.info.county+this.info.dist+this.info.road},deep:!0}},created:function(){this.getCarts()},mounted:function(){var t=this;n()(".p-checkout__item").eq(0).addClass("active"),t.$router.beforeEach((function(s,a,e){a.name===t.$route.name?(n()(".p-checkout__item").eq(0).removeClass("active"),t.clearCarts(),e()):e()}))}},l=c,u=a("2877"),d=Object(u["a"])(l,e,o,!1,null,null,null);s["default"]=d.exports}}]);
//# sourceMappingURL=chunk-e6766e4a.b5d9addf.js.map